<div class="container-wrapper">
  <div class="container">
    <div *ngIf="!targetMarketShow && !sourceMarketShow && !overlayShow && !confirmShow">

      <div class="main-container">

        <div class="content-top">
          <app-breadcrumb [path]="['asgardex', 'swap']" [message]="user ? 'prepare' : 'connect wallet'"></app-breadcrumb>
          <div class="top-right">
            <!-- <app-right-option></app-right-option> -->
            <div class="right-option">
              <a class="left" [routerLink]="['/', 'swap']" [ngClass]="left.classList.contains('active') ? '' : 'inactive'" routerLinkActive="active" #left>
                <p class="left-inner">
                  <span *ngIf="left.classList.contains('disable')" class="tag">SOON</span>
                  SWAP
                </p>
              </a>
              <a class="right disable" [ngClass]="right.classList.contains('active') ? '' : 'inactive'" routerLinkActive="active" #right>
                <p class="right-inner">
                  <span *ngIf="right.classList.contains('disable')" class="tag">SOON</span>
                  POOL
                </p>
              </a>
            </div>
          </div>
        </div>

        <!-- SOURCE -->
        <app-asset-input label="Send" [(overlay)]="sourceMarketShow" [(selectedAsset)]="selectedSourceAsset"
          [(assetUnit)]="sourceAssetUnit" [balance]="sourceBalance" [disableInput]="user ? false : true" [disableUser]="user ? false : true"
          [disabledAssetSymbol]="selectedTargetAsset ? selectedTargetAsset.symbol : null" [coinGeckoList]="coinGeckoList"
          [selectableMarkets]="selectableMarkets">
        </app-asset-input>

        <div>
          <app-arrow [seperator]="!selectedSourceAsset || !selectedTargetAsset"></app-arrow>
        </div>

        <!-- TARGET -->
        <app-asset-input [label]="selectedTargetAsset ? 'Receive (est.)' : 'Receive'" [(overlay)]="targetMarketShow"
          [(selectedAsset)]="selectedTargetAsset" [(assetUnit)]="targetAssetUnitDisplay" [balance]="targetBalance"
          [disableInput]="true" [disabledAssetSymbol]="selectedSourceAsset ? selectedSourceAsset.symbol : null"
          [loading]="calculatingTargetAsset" [hideMax]="true" [error]="poolDetailTargetError || poolDetailSourceError"
          [coinGeckoList]="coinGeckoList" [selectableMarkets]="selectableMarkets" [disableUser]="user ? false : true">
        </app-asset-input>

        <div class="swap-details" *ngIf="user">
          <div class="flxr flxr--just-space-between">
            <span class="tx-detail-label">Price:</span>
            <span
              *ngIf="basePrice && selectedTargetAsset && selectedSourceAsset, else noPrice">{{basePrice | number:"1.2-6"}}
              {{selectedSourceAsset.ticker}} per {{selectedTargetAsset.ticker}}</span>
            <ng-template #noPrice>
              <span>...</span>
            </ng-template>
          </div>
          <!-- total fee and slip -->
          <div class="flxr flxr--just-space-between">
            <span class="tx-detail-label">Total Fee:</span>
            <span
              *ngIf="basePrice && selectedTargetAsset && selectedSourceAsset && runeTransactionFee && binanceTransferFeeDisplay, else nothingFee">{{binanceTransferFeeDisplay | number:"0.0-6"}}
              BNB + {{runeTransactionFee}} Rune</span>
            <ng-template #nothingFee>
              <span>...</span>
            </ng-template>
          </div>
          <!-- <div class="flxr flxr--just-space-between">
          <span class="tx-detail-label"></span>
          <span *ngIf="basePrice && selectedTargetAsset && selectedSourceAsset && runeTransactionFee && binanceTransferFeeDisplay">{{runeTransactionFee}} Rune</span>
        </div> -->
          <div class="flxr flxr--just-space-between">
            <span class="tx-detail-label">Slip:</span>
            <span
              *ngIf="basePrice && selectedTargetAsset && selectedSourceAsset && runeTransactionFee && binanceTransferFeeDisplay, else nothingSlip">{{slip | percent:"0.2-4" }}</span>
            <ng-template #nothingSlip>
              <span>...</span>
            </ng-template>
          </div>
          <span style="display: block; color: #FF4954; font-size: 14px; margin-top: 5px;">Disclaimer: I’m a BETA product.
            Don’t swap/deposit large</span>
        </div>
        <!-- <div class="tag">
        <div class="tag-contents">

        </div>
        </div> -->

        <!-- please connect button -->
        <div class="bottom-actions">
          <button *ngIf="(user && balances)" (click)="openConfirmationDialog()" class="next-btn graident-btn"
            style="margin-top: 18px;" [disabled]="formInvalid()">
            <span>Swap</span>
          </button>
          <app-connect *ngIf="!user" [(overlay)]="overlayShow"></app-connect>
        </div>

      </div>
    </div>

    <div class="overlay-container overlay-connect-wallet" *ngIf="targetMarketShow">
      <app-markets-modal [(overlay)]="targetMarketShow"
        [(selectedAsset)]="selectedTargetAsset" [selectableMarkets]="selectableMarkets"
        [disabledAssetSymbol]="selectedSourceAsset ? selectedSourceAsset.symbol : null"></app-markets-modal>
    </div>

    <div class="overlay-container overlay-connect-wallet" *ngIf="sourceMarketShow">
      <app-markets-modal [(overlay)]="sourceMarketShow"
        [(selectedAsset)]="selectedSourceAsset" [selectableMarkets]="selectableMarkets"
        [disabledAssetSymbol]="selectedTargetAsset ? selectedTargetAsset.symbol : null"></app-markets-modal>
    </div>

    <div class="overlay-container overlay-connect-wallet" *ngIf="overlayShow">
      <app-connect-modal [(overlay)]="overlayShow"></app-connect-modal>
    </div>

    <div class="overlay-container" *ngIf="confirmShow">
      <app-confirm-swap-modal *ngIf="swapData" [swapData]="swapData" [(overlay)]="confirmShow">
      </app-confirm-swap-modal>
    </div>
  </div>
</div>
